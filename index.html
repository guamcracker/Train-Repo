<!DOCTYPE html>
  <html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script
    src="https://code.jquery.com/jquery-3.3.1.js"
    integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
    crossorigin="anonymous"></script>
    <title>Document</title>
  </head>
  <body>
      <button id="click-button">Trigger Click Counter </button>
      <script src="https://www.gstatic.com/firebasejs/4.10.1/firebase.js"></script>
      <script>
        // Initialize Firebase
        var config = {
          apiKey: "AIzaSyCf8DLZRozLQRD2LhcakxNiG9ey4kRRGH0",
          authDomain: "matthew-s-project.firebaseapp.com",
          databaseURL: "https://matthew-s-project.firebaseio.com",
          projectId: "matthew-s-project",
          storageBucket: "matthew-s-project.appspot.com",
          messagingSenderId: "693787121696"
        };
        firebase.initializeApp(config);
      
        var database = firebase.database();      
      
        $("#click-button").on("click", function() {   
          console.log("talking to firebase")
       
          // get a unique new key
          // e.g. -L6iSkvQd67Rdz3pT_ml
          var newTrainScheduleKey = firebase.database().ref().child('trainSchedules').push().key;
          
          // store a new record in firebase
          // if you wanted to update a record you would pass the record key (e.g. "-L6iSkvQd67Rdz3pT_ml")
          // instead of newTrainScheduleKey
          database.ref('trainSchedules/' + newTrainScheduleKey).set({
            train_name: "",
            destination: "",
            first_train_time: "",
            frequency: "",
            next_arrival: "",
            minutes_away: ""
          });
      });

      // this retrieves all the records
      // this happens once when the page first loads
      database.ref('/trainSchedules/').once('value').then(function(snapshot) {
        trainScheduleRecords = snapshot.val()
        console.log(trainScheduleRecords)

        // loop through all the records and add each record as a new line in the html table
        
      });
      
      // listen for changes
      // when there is a change to trainSchedules it will let us know
      database.ref('/trainSchedules/').on('value', function(snapshot) {
        console.log("something changed!")
        trainScheduleRecord = snapshot.val()
        // when there is a change you can use this data to recreate the train schedules table
        
        // here you are going to want to wipe the contents of the html table and loop
        // through all the records and recreate the table more or less with the upated
        // information
      });
      </script>
  </body>
  </html>
